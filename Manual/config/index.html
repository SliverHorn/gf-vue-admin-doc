<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="SliverHorn">
        <link rel="canonical" href="https://sliverhorn.github.io/Manual/config/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>配置文件 - gf-vue-admin在线文档</title>

        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.min.css">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../..">
            
            gf-vue-admin在线文档
            </a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
            
                
                <li >
                    <a href="../..">
                      简介
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="../../Introduction/">
                      介绍
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="../">
                      小白说明书
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="../directory/">
                      目录结构
                    </a>
                </li>
                
            
            
            
            
            
                
                <li class="active">
                    <a href="./">
                      配置文件
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="../../jwt/">
                      JWT详解
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="https://www.yuque.com/flipped-aurora/">
                      团队知识库
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="https://space.bilibili.com/322210472">
                      视频站
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="https://github.com/flipped-aurora">
                      GitHub
                    </a>
                </li>
                
            
            
            
            
            
                
                <li >
                    <a href="../../about/">
                      About
                    </a>
                </li>
                
            
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
              
                
                <li>
                    <a href="https://github.com/SliverHorn/gf-vue-admin-doc/">
                        
                            <i class="fa fa-code-fork"></i>
                        
                        gf-vue-admin-doc
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3">
  
<div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#2-configtoml">2. 配置文件详解(config.toml)</a></li>
        
            <li><a href="#21-server">2.1 [server]</a></li>
        
            <li><a href="#22-logger">2.2 [logger]</a></li>
        
            <li><a href="#23-database">2.3 [database]</a></li>
        
            <li><a href="#24-redis">2.4 [redis]</a></li>
        
    
    </ul>
</div>
  
</div>
            <div class="col-md-9" role="main">

<h2 id="2-configtoml">2. 配置文件详解(config.toml)</h2>
<h3 id="21-server">2.1 [server]</h3>
<table>
<thead>
<tr>
<th>配置分类</th>
<th align="center">配置名</th>
<th align="center">配置类型</th>
<th align="left">英文描述</th>
<th align="left">中文描述</th>
<th align="center">链接</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">Address</td>
<td align="center">string</td>
<td align="left">Address specifies the server listening address like "port" or ":port",multiple addresses joined using ','.</td>
<td align="left">地址指定服务器的侦听地址，例如“ port”或“：port”，使用'，'连接多个地址</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">HTTPSAddr</td>
<td align="center">string</td>
<td align="left">HTTPSAddr specifies the HTTPS addresses, multiple addresses joined using char ','.</td>
<td align="left">HTTPSAddr指定HTTPS地址，即使用','连接的多个地址</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">HTTPSCertPath</td>
<td align="center">string</td>
<td align="left">HTTPSCertPath specifies certification file path for HTTPS service.</td>
<td align="left">HTTPSCertPath指定HTTPS服务的认证文件路径</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">HTTPSKeyPath</td>
<td align="center">string</td>
<td align="left">HTTPSKeyPath specifies the key file path for HTTPS service.</td>
<td align="left">HTTPSKeyPath指定HTTPS服务的密钥文件路径</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">ServerAgent</td>
<td align="center">string</td>
<td align="left">specifies the server agent information, which is wrote to Http response header as "Server"</td>
<td align="left">ServerAgent指定服务器代理信息，该信息将写入，HTTP响应标头为“服务器”</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">TLSConfig</td>
<td align="center">*tls.Config</td>
<td align="left">TLSConfig optionally provides a TLS configuration for use by ServeTLS and ListenAndServeTLS. Note that this value is cloned by ServeTLS and ListenAndServeTLS, so it's not  possible to modify the configuration with methods like tls.Config.SetSessionTicketKeys. To use  SetSessionTicketKeys, use Server.Serve with a TLS Listener instead.</td>
<td align="left">（可选）提供由ServeTLS和ListenAndServeTLS使用的TLS配置请注意，此值是由ServeTLS和ListenAndServeTLS克隆的，因此无法使用tls.Config.SetSessionTicketKeys之类的方法修改配置。若要使用SetSessionTicketKeys，请改为将Server.Serve与TLS侦听器一起使用</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">Handler</td>
<td align="center">http.Handler</td>
<td align="left">Handler the handler for HTTP request.</td>
<td align="left">处理程序HTTP请求的处理程序</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">ReadTimeout</td>
<td align="center">time.Duration</td>
<td align="left">ReadTimeout is the maximum duration for reading the entire  request, including the body. Because ReadTimeout does not let Handlers make per-request  decisions on each request body's acceptable deadline or  upload rate, most users will prefer to use  ReadHeaderTimeout. It is valid to use them both.</td>
<td align="left">ReadTimeout是读取整个请求（包括正文）的最大持续时间。由于ReadTimeout不允许处理程序根据每个请求正文的可接受的截止日期或上载速率做出每个请求的决定，因此大多数用户将更喜欢使用ReadHeaderTimeout。同时使用它们是有效的</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">WriteTimeout</td>
<td align="center">time.Duration</td>
<td align="left">WriteTimeout is the maximum duration before timing out writes of the response. It is reset whenever a new request's header is read. Like ReadTimeout, it does not let Handlers make decisions on a per-request basis.</td>
<td align="left">WriteTimeout是超时写入响应之前的最大持续时间。每当读取新请求的标头时，都会将其重置。与ReadTimeout一样，它也不允许处理程序根据每个请求做出决策</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">IdleTimeout</td>
<td align="center">time.Duration</td>
<td align="left">IdleTimeout is the maximum amount of time to wait for the next request when keep-alives are enabled. If IdleTimeout  is zero, the value of ReadTimeout is used. If both are zero, there is no timeout.</td>
<td align="left">IdleTimeout是启用保持活动状态后等待下一个请求的最长时间。如果IdleTimeout为零，则使用ReadTimeout的值。如果两者均为零，则没有超时</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">MaxHeaderBytes</td>
<td align="center">int</td>
<td align="left">MaxHeaderBytes controls the maximum number of bytes the server will read parsing the request header's keys and  values, including the request line. It does not limit the size of the request body. It can be configured in configuration file using string like: 1m, 10m, 500kb etc. It's 1024 bytes in default.</td>
<td align="left">MaxHeaderBytes控制服务器读取的最大字节数，以解析请求标头的键和值（包括请求行）。它不限制请求主体的大小。可以使用以下字符串在配置文件中对其进行配置：1m，10m，500kb等。默认值为1024字节</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">ServerAgent</td>
<td align="center">string</td>
<td align="left">ServerAgent specifies the server agent information, which is wrote to HTTP response header as "Server"</td>
<td align="left">ServerAgent指定服务器代理信息，该信息作为“服务器”写入HTTP响应标头</td>
<td align="center"></td>
</tr>
<tr>
<td>Basic</td>
<td align="center">View</td>
<td align="center">*gview.View</td>
<td align="left">View specifies the default template view object for the server.</td>
<td align="left">视图指定服务器的默认模板视图对象</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">Rewrites</td>
<td align="center">map[string]string</td>
<td align="left">Rewrites specifies the URI rewrite rules map.</td>
<td align="left">重写指定URI重写规则映射</td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">IndexFiles</td>
<td align="center">[]string</td>
<td align="left">IndexFiles specifies the index files for static folder.</td>
<td align="left">指定静态文件夹的索引文件</td>
<td align="center"><a href="https://goframe.org/net/ghttp/static">点我</a></td>
</tr>
<tr>
<td>Static</td>
<td align="center">IndexFolder</td>
<td align="center">bool</td>
<td align="left">IndexFolder specifies if listing sub-files when requesting folder.The server responses HTTP status code 403 if it is false.</td>
<td align="left">指定在请求文件夹时是否列出子文件。服务器返回HTTP状态码403（如果为false）</td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">ServerRoot</td>
<td align="center">string</td>
<td align="left">specifies the root directory for static service</td>
<td align="left">指定静态服务的根目录,用来设置Server的主目录（类似nginx中的root配置，默认为空）</td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">SearchPaths</td>
<td align="center">[]string</td>
<td align="left">SearchPaths specifies additional searching directories for static service.</td>
<td align="left">指定用于静态服务的其他搜索目录</td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">StaticPaths</td>
<td align="center">[]staticPathItem</td>
<td align="left">StaticPaths specifies URI to directory mapping array.</td>
<td align="left">指定URI到目录的映射数组</td>
<td align="center"></td>
</tr>
<tr>
<td>Static</td>
<td align="center">FileServerEnabled</td>
<td align="center">bool</td>
<td align="left">FileServerEnabled is the global switch for static service.It is automatically set enabled if any static path is set.</td>
<td align="left">静态服务的全局开关。如果设置了任何静态路径，它将自动设置为启用</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Cookie</td>
<td align="center">CookieMaxAge</td>
<td align="center">time.Duration</td>
<td align="left">CookieMaxAge specifies the max TTL for cookie items.</td>
<td align="left">指定Cookie项目的最大TTL</td>
<td align="center"></td>
</tr>
<tr>
<td>Cookie</td>
<td align="center">CookiePath</td>
<td align="center">string</td>
<td align="left">CookiePath specifies cookie path.It also affects the default storage for session id.</td>
<td align="left">指定cookie路径，它也会影响会话ID的默认存储</td>
<td align="center"></td>
</tr>
<tr>
<td>Cookie</td>
<td align="center">CookieDomain</td>
<td align="center">string</td>
<td align="left">CookieDomain specifies cookie domain.It also affects the default storage for session id.</td>
<td align="left">指定cookie域，还会影响会话ID的默认存储</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Session</td>
<td align="center">SessionMaxAge</td>
<td align="center">time.Duration</td>
<td align="left">specifies max TTL for session items.</td>
<td align="left">指定会话项目的最大TTL</td>
<td align="center"></td>
</tr>
<tr>
<td>Session</td>
<td align="center">SessionIdName</td>
<td align="center">string</td>
<td align="left">specifies the session id name.</td>
<td align="left">指定会话ID名称,SessionId的识别名称</td>
<td align="center"></td>
</tr>
<tr>
<td>Session</td>
<td align="center">SessionPath</td>
<td align="center">string</td>
<td align="left">specifies the session storage directory path for storing session files,It only makes sense if the session storage is type of file storage.</td>
<td align="left">指定用于存储会话文件的会话存储目录路径。仅当会话存储为文件存储类型时才有意义</td>
<td align="center"></td>
</tr>
<tr>
<td>Session</td>
<td align="center">SessionStorage</td>
<td align="center">gsession.Storage</td>
<td align="left">SessionStorage specifies the session storage</td>
<td align="left">SessionStorage指定会话存储</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">Logger</td>
<td align="center">*glog.Logger</td>
<td align="left">Logger specifies the logger for server.</td>
<td align="left">记录器指定服务器的记录器</td>
<td align="center"></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">LogPath</td>
<td align="center">string</td>
<td align="left">LogPath specifies the directory for storing logging files.</td>
<td align="left">指定用于存储日志文件的目录</td>
<td align="center"></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">LogStdout</td>
<td align="center">bool</td>
<td align="left">LogStdout specifies whether printing logging content to stdout.</td>
<td align="left">LogStdout指定是否将日志记录内容打印到stdout</td>
<td align="center"></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">ErrorStack</td>
<td align="center">bool</td>
<td align="left">ErrorStack specifies whether logging stack information when error.</td>
<td align="left">ErrorStack指定是否在发生错误时记录堆栈信息</td>
<td align="center"></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">ErrorLogEnabled</td>
<td align="center">bool</td>
<td align="left">enables error logging content to files.</td>
<td align="left">启用错误日志记录文件</td>
<td align="center"><a href="https://goframe.org/net/ghttp/logs">点我</a></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">AccessLogEnabled</td>
<td align="center">bool</td>
<td align="left">enables access logging content to files.</td>
<td align="left">启用访问日志记录内容到文件</td>
<td align="center"><a href="https://goframe.org/net/ghttp/logs">点我</a></td>
</tr>
<tr>
<td>Logging</td>
<td align="center">AccessLogPattern</td>
<td align="center">string</td>
<td align="left">AccessLogPattern specifies the error log file pattern like: access-{Ymd}.log</td>
<td align="left">AccessLogPattern指定错误日志文件模式，例如：access- {Ymd} .log</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>PProf</td>
<td align="center">PProfEnabled</td>
<td align="center">bool</td>
<td align="left">enables PProf feature.</td>
<td align="left">启用PProf功能</td>
<td align="center"><a href="https://goframe.org/net/ghttp/logs">点我</a></td>
</tr>
<tr>
<td>PProf</td>
<td align="center">PProfPattern</td>
<td align="center">string</td>
<td align="left">PProfPattern specifies the PProf service pattern for router.</td>
<td align="left">指定路由器的PProf服务模式</td>
<td align="center"></td>
</tr>
<tr>
<td></td>
<td align="center"></td>
<td align="center"></td>
<td align="left"></td>
<td align="left"></td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">ClientMaxBodySize</td>
<td align="center">int64</td>
<td align="left">ClientMaxBodySize specifies the max body size limit in bytes for client request.  It can be configured in configuration file using string like: 1m, 10m, 500kb etc.  It's 8MB in default.</td>
<td align="left">ClientMaxBodySize指定客户端请求的最大主体大小限制（以字节为单位）。可以使用以下字符串在配置文件中进行配置：1m，10m，500kb等。默认为8MB。</td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">FormParsingMemory</td>
<td align="center">int64</td>
<td align="left">FormParsingMemory specifies max memory buffer size in bytes which can be used for parsing multimedia form. It can be configured in configuration file using string like: 1m, 10m, 500kb etc. It's 1MB in default.</td>
<td align="left">FormParsingMemory以字节为单位指定最大内存缓冲区大小，可用于解析多媒体格式。可以使用以下字符串在配置文件中对其进行配置：1m，10m，500kb等。默认为1MB。</td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">NameToUriType</td>
<td align="center">int</td>
<td align="left">NameToUriType specifies the type for converting struct method name to URI when registering routes.</td>
<td align="left">NameToUriType指定在注册路由时用于将结构方法名称转换为URI的类型</td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">RouteOverWrite</td>
<td align="center">bool</td>
<td align="left">RouteOverWrite allows overwrite the route if duplicated.</td>
<td align="left">如果复制，RouteOverWrite允许覆盖路由</td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">DumpRouterMap</td>
<td align="center">bool</td>
<td align="left">specifies whether automatically dumps router map when server starts.</td>
<td align="left">指定服务器启动时是否自动转储路由器映射。</td>
<td align="center"></td>
</tr>
<tr>
<td>Other</td>
<td align="center">Graceful</td>
<td align="center">bool</td>
<td align="left">Graceful enables graceful reload feature for all servers of the process.</td>
<td align="left">为进程的所有服务器启用优美的重新加载功能</td>
<td align="center"></td>
</tr>
</tbody>
</table>
<h3 id="22-logger">2.2 [logger]</h3>
<table>
<thead>
<tr>
<th align="center">配置选项</th>
<th align="center">配置类型</th>
<th align="center">英文描述</th>
<th align="center">中文描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">LogPath</td>
<td align="center">string</td>
<td align="center">LogPath specifies the directory for storing logging files.</td>
<td align="center">LogPath指定用于存储日志文件的目录</td>
</tr>
<tr>
<td align="center">LogStdout</td>
<td align="center">bool</td>
<td align="center">LogStdout specifies whether printing logging content to stdout.</td>
<td align="center">LogStdout指定是否将日志记录内容打印到stdout。</td>
</tr>
<tr>
<td align="center">ErrorStack</td>
<td align="center">bool</td>
<td align="center">ErrorStack specifies whether logging stack information when error.</td>
<td align="center">ErrorStack指定是否在发生错误时记录堆栈信息。</td>
</tr>
<tr>
<td align="center">ErrorStack</td>
<td align="center">bool</td>
<td align="center">ErrorLogEnabled enables error logging content to files.</td>
<td align="center">ErrorLogEnabled允许将内容错误记录到文件中。</td>
</tr>
<tr>
<td align="center">ErrorLogPattern</td>
<td align="center">string</td>
<td align="center">AccessLogPattern specifies the error log file pattern like: access-{Ymd}.log</td>
<td align="center">AccessLogPattern指定错误日志文件模式，例如：access- {Ymd} .log</td>
</tr>
</tbody>
</table>
<h3 id="23-database">2.3 [database]</h3>
<p>完整的<code>config.toml</code>数据库配置项的数据格式形如下：</p>
<pre><code class="shell">[database]
    [[database.分组名称]]
        Host         = &quot;地址&quot;
        Port         = &quot;端口&quot;
        User         = &quot;账号&quot;
        Pass         = &quot;密码&quot;
        Name         = &quot;数据库名称&quot;
        Type         = &quot;数据库类型(目前支持mysql/pgsql/sqlite)&quot;
        Role         = &quot;(可选)数据库主从角色(master/slave)，不使用应用层的主从机制请均设置为master&quot;
        Debug        = &quot;(可选)开启调试模式&quot;
        Prefix       = &quot;(可选)表名前缀&quot;
        DryRun       = &quot;(可选)ORM空跑(只读不写)&quot;
        Charset      = &quot;(可选)数据库编码(如: utf8/gbk/gb2312)，一般设置为utf8&quot;
        Weight       = &quot;(可选)负载均衡权重，用于负载均衡控制，不使用应用层的负载均衡机制请置空&quot;
        Linkinfo     = &quot;(可选)自定义数据库链接信息，当该字段被设置值时，以上链接字段(Host,Port,User,Pass,Name)将失效，但是type必须有值&quot;
        MaxIdle      = &quot;(可选)连接池最大闲置的连接数&quot;
        MaxOpen      = &quot;(可选)连接池最大打开的连接数&quot;
        MaxLifetime  = &quot;(可选，单位秒)连接对象可重复使用的时间长度&quot;
</code></pre>

<p><code>gdb</code>数据库管理模块的内部配置管理数据结构如下：</p>
<pre><code class="go">type Config      map[string]ConfigGroup // 数据库配置对象
type ConfigGroup []ConfigNode           // 数据库分组配置
// 数据库配置项(一个分组配置对应多个配置项)
type ConfigNode  struct {
    Host             string   // 地址
    Port             string   // 端口
    User             string   // 账号
    Pass             string   // 密码
    Name             string   // 数据库名称
    Type             string   // 数据库类型：mysql, sqlite, mssql, pgsql, oracle
    Role             string   // (可选，默认为master)数据库的角色，用于主从操作分离，至少需要有一个master，参数值：master, slave
    Debug            bool     // (可选)开启调试模式
    Charset          string   // (可选，默认为 utf8)编码，默认为 utf8
    Prefix           string   // (可选)表名前缀
    Weight           int      // (可选)用于负载均衡的权重计算，当集群中只有一个节点时，权重没有任何意义
    Linkinfo         string   // (可选)自定义链接信息，当该字段被设置值时，以上链接字段(Host,Port,User,Pass,Name)将失效(该字段是一个扩展功能)
    MaxIdleConnCount int      // (可选)连接池最大闲置的连接数
    MaxOpenConnCount int      // (可选)连接池最大打开的连接数
    MaxConnLifetime  int      // (可选，单位秒)连接对象可重复使用的时间长度
}
</code></pre>

<h4 id="_1">简化配置</h4>
<p>为兼容不同的数据库类型，<code>gdb</code>将数据库的各个字段拆分出来单独配置，这样对于各种数据库的对接来说兼容性会很好。但是对于开发者来说看起来配置比较多。针对于项目中使用的已确定的数据库类型的配置，我们可以使用<code>linkinfo</code>属性（名称也可以简化为<code>link</code>）进行配置。如：</p>
<pre><code class="go">[database]
    [[database.default]]
        type = &quot;mysql&quot;
        link = &quot;root:12345678@tcp(127.0.0.1:3306)/test&quot;
    [[database.user]]
        type = &quot;mysql&quot;
        link = &quot;mysql:root:12345678@tcp(127.0.0.1:3306)/user&quot;
</code></pre>

<p>也可以简化为：</p>
<pre><code class="go">[database]
    [[database.default]]
        link = &quot;mysql:root:12345678@tcp(127.0.0.1:3306)/test&quot;
    [[database.user]]
        link = &quot;mysql:root:12345678@tcp(127.0.0.1:3306)/user&quot;
</code></pre>

<p>不同数据类型对应的<code>linkinfo</code>如下:</p>
<table>
<thead>
<tr>
<th>数据库类型</th>
<th>Linkinfo配置</th>
<th>更多参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>mysql</td>
<td><code>mysql: 账号:密码@tcp(地址:端口)/数据库名称</code></td>
<td><a href="https://github.com/go-sql-driver/mysql">mysql</a></td>
</tr>
<tr>
<td>pgsql</td>
<td><code>pgsql: user=账号 password=密码 host=地址 port=端口 dbname=数据库名称</code></td>
<td><a href="https://github.com/lib/pq">pq</a></td>
</tr>
<tr>
<td>mssql</td>
<td><code>mssql: user id=账号;password=密码;server=地址;port=端口;database=数据库名称;encrypt=disable</code></td>
<td><a href="https://github.com/denisenkom/go-mssqldb">go-mssqldb</a></td>
</tr>
<tr>
<td>sqlite</td>
<td><code>sqlite: 文件绝对路径</code> (如: <code>/var/lib/db.sqlite3</code>)</td>
<td><a href="https://github.com/mattn/go-sqlite3">go-sqlite3</a></td>
</tr>
<tr>
<td>oracle</td>
<td><code>oracle: 账号/密码@地址:端口/数据库名称</code></td>
<td><a href="https://github.com/mattn/go-oci8">go-oci8</a></td>
</tr>
</tbody>
</table>
<h3 id="24-redis">2.4 [redis]</h3>
<h4 id="_2">官方推荐配置</h4>
<p>推荐使用配置文件来管理Redis配置，在<code>config.toml</code>中的配置示例如下：</p>
<pre><code class="go"># Redis数据库配置
[redis]
    # Redis的配置格式host:port[,db,pass?maxIdle=x&amp;maxActive=x&amp;idleTimeout=x&amp;maxConnLifetime=x]
    default = &quot;127.0.0.1:6379,0&quot;
    cache   = &quot;127.0.0.1:6379,1,123456?idleTimeout=600&quot;
</code></pre>

<p>各配置项说明如下：</p>
<table>
<thead>
<tr>
<th align="left">配置项名称</th>
<th>类型</th>
<th>是否必须</th>
<th>默认值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">host</td>
<td>string</td>
<td>是</td>
<td>-</td>
<td>地址</td>
</tr>
<tr>
<td align="left">port</td>
<td>int</td>
<td>是</td>
<td>-</td>
<td>端口</td>
</tr>
<tr>
<td align="left">db</td>
<td>int</td>
<td>否</td>
<td>0</td>
<td>数据库</td>
</tr>
<tr>
<td align="left">pass</td>
<td>string</td>
<td>否</td>
<td>-</td>
<td>授权密码</td>
</tr>
<tr>
<td align="left">maxIdle</td>
<td>int</td>
<td>否</td>
<td>0</td>
<td>允许限制的连接数(0表示不闲置)</td>
</tr>
<tr>
<td align="left">maxActive</td>
<td>int</td>
<td>否</td>
<td>0</td>
<td>最大连接数量限制(0表示不限制)</td>
</tr>
<tr>
<td align="left">idleTimeout</td>
<td>time.Duration</td>
<td>否</td>
<td>60</td>
<td>连接最大空闲时间(单位秒,不允许设置为0)</td>
</tr>
<tr>
<td align="left">maxConnLifetime</td>
<td>time.Duration</td>
<td>否</td>
<td>60</td>
<td>连接最长存活时间(单位秒,不允许设置为0)</td>
</tr>
</tbody>
</table>
<p><code>gredis</code>数据库管理模块的内部配置管理数据结构如下：</p>
<pre><code class="go">// Redis configuration.
type Config struct {
    Host            string
    Port            int
    Db              int
    Pass            string        // Password for AUTH.
    MaxIdle         int           // Maximum number of connections allowed to be idle (default is 10)
    MaxActive       int           // Maximum number of connections limit (default is 0 means no limit).
    IdleTimeout     time.Duration // Maximum idle time for connection (default is 10 seconds, not allowed to be set to 0)
    MaxConnLifetime time.Duration // Maximum lifetime of the connection (default is 30 seconds, not allowed to be set to 0)
    ConnectTimeout  time.Duration // Dial connection timeout.
}
</code></pre></div>
        </div>

    <footer class="col-md-12">
        <hr>
        
        <center>Copyright &copy; 2020 - 2020 SliverHorn</center>
        
    </footer>

        <script src="../../js/jquery.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>
    </body>
</html>